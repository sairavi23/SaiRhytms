<div class="btn btn-link" id="showhideRecentSearch">Recent Searches <span class="glyphicon glyphicon-plus" style="color:green"/></div>
<div id="RecentSearch"></div>

<script>
    $(function () {

        $("#showhideRecentSearch").click(function () {
            if ($("#showhideRecentSearch").html().toUpperCase().includes("MINUS"))
            {
                $("#showhideRecentSearch").html('Recent Searches <span class="glyphicon glyphicon-plus" style="color:green"/>');
                $("#RecentSearch").html("");
            }
            else {
                $("#showhideRecentSearch").html('Recent Searches <span class="glyphicon glyphicon-minus" style="color:red" /> ');
                $("#RecentSearch").html(BuildRecentSearchHtml());
            }
        });

        function BuildRecentSearchHtml() {
            var searchHtml = "";
            searchHtml = searchHtml + '<ul data-role="listview" class="list-group">';
            if (localStorage.getItem('RecentSearch') === null) {
                searchHtml = '<li class="list-group-item"> No Recent Searches</li>'
            }
            else {
                var recentJson = JSON.parse(localStorage.getItem('RecentSearch'));
                for (var i in recentJson) {
                    if (recentJson[i].Name != "") {
                        searchHtml = searchHtml + '<li class="list-group-item"> <a href=' + recentJson[i].Link + '>' + recentJson[i].Name + '</a>';
                        searchHtml = searchHtml + '<span class="glyphicon glyphicon-trash removeRecentSearch" style="float:right; padding-left:20px;" id= ' + recentJson[i].Id + '"></span></li>';
                    }
                }
            }
            searchHtml = searchHtml + "</ul>";
            return searchHtml;
        }

        $(document).on('click', '.removeRecentSearch', function () {
            var id = $(this).attr('id');
            id = id.replace('"','');
            if (localStorage.getItem('RecentSearch') != null) {
                var removeJson = JSON.parse(localStorage.getItem('RecentSearch'));
                var counter = -1;
                for (var i in removeJson) {
                    counter = counter + 1;
                    if (removeJson[i].Id == id) {
                        console.log(removeJson[i].Id);
                        removeJson.splice(counter, 1);
                        localStorage.setItem('RecentSearch', JSON.stringify(removeJson))
                        break;
                    }
                }
                $("#showhideRecentSearch").html('Recent Searches <span class="glyphicon glyphicon-minus" style="color:green"/>');
                $("#RecentSearch").html(BuildRecentSearchHtml());
            }
        });

    });


</script>